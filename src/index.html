<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地理 - ピクセルゲーム</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="startScreen" class="min-h-screen flex flex-col items-center justify-center p-4">
        <div class="text-center">
            <div class="text-6xl text-amber-300 font-bold mb-4 pixel-text leading-tight">まぼろしの</div>
            <div class="text-7xl text-amber-300 font-bold mb-8 pixel-text">地理の種</div>
            <div id="startButton" class="pixel-button p-6 text-4xl cursor-pointer pulse">
                ▶ スタート！
            </div>
            <div id="countdownDisplay" class="text-6xl text-amber-300 font-bold pixel-text mt-8"></div>
        </div>
    </div>

    <div id="ruleScreen" class="hidden min-h-screen flex flex-col items-center justify-center p-4">
        <div class="relative max-w-lg w-full flex flex-col items-center">
            <img src="img/cat.svg" alt="黒猫" class="w-48 h-48 mb-[-20px] z-10">
            <div id="speechBubbles" class="w-full">
                <div class="speech-bubble pixel-card p-4 mb-4 text-center text-xl opacity-0">古代遺跡の奥　まぼろしの地理の種だ！</div>
                <div class="speech-bubble pixel-card p-4 mb-4 text-center text-xl opacity-0">地理の知識を与えると育つらしい</div>
                <div class="speech-bubble pixel-card p-4 mb-4 text-center text-xl opacity-0">じつにおいしそう…</div>
            </div>
            <div id="ruleConfirmBtn" class="pixel-button p-4 text-2xl cursor-pointer mt-4 opacity-0">
                わかった
            </div>
        </div>
    </div>

    <div id="lifeScreen" class="hidden min-h-screen flex flex-col justify-between items-center p-4 overflow-hidden">
        <div class="w-full flex justify-center pt-8" style="flex: 1;">
            <div id="nextQuestionDisplay" class="next-question-font text-6xl text-amber-300 pixel-text px-4 py-2 bg-black bg-opacity-50 rounded-lg">NEXT 01</div>
        </div>
         
        <div id="plantContainer" class="w-full flex flex-col items-center justify-center relative my-4" style="flex: 4;">
            <div id="wateringCan" class="absolute hidden top-1/3 left-1/2 -translate-x-1/2 z-20">
                <svg width="120" height="120" viewBox="0 0 24 24">
                    <path fill="#000" d="M3 13h1v1h1v1h1v1h8v-1h1v-1h1v-1h2v-1h1v-1h1v4h-1v1h-1v1h-2v1h-1v1H8v-1H7v-1H5v-1H4v-1H3v-4zm15 1h1v1h-1v-1zm-1 1h-1v1h1v-1zm-10 2h1v1h-1v-1zm1 1h6v1h-6v-1z M19 13h2v-1h1v-1h1v-1h-1V9h-1V8h-2v1h-1v4h1v-1z"/>
                    <path fill="#c0c0c0" d="M4 14h1v1h1v1h8v-1h1v-1h2v-1h1v4h-1v1h-2v1h-1v1H8v-1H5v-1H4v-3zm14 1h-1v1h1v-1zm-1 1h-1v1h1v-1zm-10 2h1v1h-1v-1zm2 1h6v-1h-6v1z M20 12h1v-1h1v-1h-1V9h-1v3zm0-3h1V8h-1v1z"/>
                    <g id="waterDrops">
                        <path class="water-drop" fill="#87CEEB" stroke="#000" stroke-width="0.5" d="M22 13 q 2 3 0 5 q -2 2 -4 0 q -2 -3 0 -5 q 2 -2 4 0" />
                        <path class="water-drop" style="animation-delay: 0.1s" fill="#87CEEB" stroke="#000" stroke-width="0.5" d="M24 15 q 2 3 0 5 q -2 2 -4 0 q -2 -3 0 -5 q 2 -2 4 0" />
                    </g>
                </svg>
            </div>
             <svg id="plantSvg" width="450" height="600" viewBox="0 0 150 200" class="absolute bottom-0 z-10">
                <g id="plantGroup">
                    <g id="flowersContainer"></g>
                    <rect id="plantStem" x="73" y="150" width="4" height="0" fill="#22C55E" stroke="#166534" stroke-width="1"/>
                    <g id="plantLeaves"></g>
                    <g id="plantPot"></g>
                </g>
            </svg>
            <div id="plantEffect" class="absolute hidden rounded-full opacity-0 z-0"></div>
        </div>

        <div class="w-full flex justify-center pb-8" style="flex: 1;">
            <div id="livesContainer" class="flex items-center justify-center gap-4 p-4 bg-black bg-opacity-50 rounded-lg"></div>
        </div>
    </div>

    <div id="gameScreen" class="hidden min-h-screen flex flex-col justify-center max-w-2xl mx-auto p-4">
        <div id="questionText" class="text-center text-3xl text-amber-300 pixel-text mb-4 p-2 bg-black bg-opacity-75 rounded-lg"></div>
        <div class="flex-grow flex items-center justify-center p-4">
            <div id="questionContent" class="text-center"></div>
        </div>
        <div class="p-4">
            <div id="choices" class="grid grid-cols-2 gap-4">
                <button class="choice-btn pixel-button py-4 px-4 text-lg" data-answer="0">選択肢1</button>
                <button class="choice-btn pixel-button py-4 px-4 text-lg" data-answer="1">選択肢2</button>
                <button class="choice-btn pixel-button py-4 px-4 text-lg" data-answer="2">選択肢3</button>
                <button class="choice-btn pixel-button py-4 px-4 text-lg" data-answer="3">選択肢4</button>
            </div>
        </div>
        <div class="p-3 relative flex items-center justify-center">
            <div id="bombContainer" class="relative w-28 h-28 flex-shrink-0">
                <svg width="100%" height="100%" viewBox="0 0 48 48"><rect x="12" y="20" width="24" height="24" fill="#333333"/><rect x="8" y="24" width="32" height="16" fill="#333333"/><rect x="28" y="8" width="4" height="12" fill="#A16207"/><rect x="32" y="4" width="8" height="8" fill="#F59E0B"/><rect x="30" y="10" width="4" height="4" fill="#FEF08A"/></svg>
                <div id="explosionEffect" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden z-20">
                    <svg width="150" height="150" viewBox="0 0 100 100" class="explosion-svg">
                        <path d="M50 0 L65 30 L95 20 L80 50 L100 65 L70 70 L80 95 L50 80 L20 95 L30 70 L0 65 L20 50 L5 20 L35 30 Z" fill="orange" class="explosion-path"/>
                        <path d="M50 10 L60 30 L80 25 L70 50 L90 60 L60 65 L70 85 L50 75 L30 85 L40 65 L10 60 L30 50 L20 25 L40 30 Z" fill="yellow" class="explosion-path"/>
                    </svg>
                </div>
            </div>
            <div id="fuseContainer" class="flex-1 h-3 bg-yellow-800 rounded-r-full overflow-hidden relative">
                <div id="timerBar" class="h-full bg-gradient-to-r from-red-500 via-orange-400 to-yellow-300" style="width: 100%;"></div>
                <div id="spark" class="absolute top-1/2 w-6 h-6 -translate-y-1/2">
                    <svg viewBox="0 0 16 16"><path fill="white" d="M8 0 L10 6 L16 8 L10 10 L8 16 L6 10 L0 8 L6 6 Z"/></svg>
                </div>
            </div>
        </div>
    </div>
     
    <div id="resultOverlay" class="hidden fixed inset-0 result-overlay flex items-center justify-center z-50">
        <div id="resultSymbol" class="font-bold pixel-text"></div>
    </div>
     
    <div id="resultScreen" class="hidden min-h-screen flex flex-col items-center justify-center p-8">
        <div class="pixel-card p-8 text-center max-w-2xl w-full bounce-in">
            <div id="resultTitle" class="text-4xl mb-4 text-amber-300 font-bold pixel-text"></div>
            <div id="finalPlantContainer" class="w-full flex justify-center items-end my-4" style="height: 300px;">
                <div class="relative flex items-end h-full">
                    <svg id="finalPlantSvg" viewBox="0 0 100 100" class="h-full w-auto"></svg>
                    <div id="plantMeasure" class="h-full w-4 bg-gray-700 ml-4 relative"></div>
                    <div id="plantHeightText" class="absolute text-xl font-bold text-white pixel-text -right-24 bottom-1/2 translate-y-1/2"></div>
                </div>
            </div>
            <div id="resultMessage" class="text-xl mb-6 text-amber-200 font-bold pixel-text"></div>
            <button id="restartBtn" class="pixel-button py-4 px-8 text-xl">もう一度！</button>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>